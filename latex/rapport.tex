\documentclass[12pt]{report}
%% Language and font encodings
\usepackage[francais]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern} 
\usepackage[svgnames]{xcolor}
\usepackage{float} % figure
\usepackage{eurosym} % euro character
\usepackage{minted} % syntax coloring
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}

%% Sets page size and margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

%% Syntax color for minted code blocks
\usemintedstyle{tango}

\title{Licence ADSILLH 2017/2018\\Rapport de projet Réseau:\\Pong
  multijoueur en Python}
\author{Pierre Antoine Rouby - David Tabarie\newline}

\date{}

\begin{document}
\maketitle

\begin{abstract}
\end{abstract}
\tableofcontents

% Je sais pas du tout si la classe report est une bonne idée...
\part{Présentation du projet}
% Reformuler le pdf

\part{Idée de départ}
\chapter{Architecture du programme}
Le programme et doit être un pong en réseaux et doit être jouable a 2.
Nous avons donc plussieur solution de connection réseaux qui s'offre a
nous:
\begin{itemize}
\item Un système Client/Server centralisé: \\
  Un tel système néssesite un server centra et 2 client, les client se
  connect au server et via une clef de session (par example) créer une partie
  privé que seul les deux joueurs pouront rejoindre, le server central doit
  donc pouvoir géré plusieur partie en meme temps. \\
  Le problème de cette solution et qu'il faut entretenir un serveur 24h/24
  car sans luis les joueurs ne pourron pas jouer.
  Même si on partage les sources du server tous le joueur n'on pas forcément
  envie ou les moyens de mettre en place un server pour une partie ou deux
\item Un système Client/Server acentré: \\
  Ce système et basser sur un même fichier executable qui va pouvoir prendre
  sois le rôle de server sois de client. l'avantage de se système et qu'il n'y
  a pas besion de lancé en autre programme, il faut juste que les joueurs de
  déside de qui va se connecté a qui. \\
  \textit{Un problème peut se poser si les deux joueur ne sont pas sur le même
    reseaux et que les ports ne sont pas ouvert. Des solution doivent exister
    mais nous n'avons pas eu le temps de chercher}
  Se système se raproche d'un P2P (peer2peer) car le server et le client
  auron peu ou prou le même rôle, chacun devra vérifié que l'autre ne triche
  pas. La principal diférence est que le client va prendre les paramètre de
  jeux du server à sa connection.
  Ici le server n'a pas d'otorité spésifique, les deux côté doive être au
  courrant de la possition de l'autre.
  \textit{Ce qui peut poser problème en cas de ping élevé}
\end{itemize}
Nous avons opter pour un système Client/Server acentré avec une option au
lancement du programme \textit{main.py --server} ou \textit{main.py --client}.
Nous avons choisi une connection en \texttt{tcp} pour pouvoir repéré plus
facilement les problème de déconnection (\textit{rage quit}).

\chapter{Game design}
Pour le disigne du pong nous avons choisi de voir les deux joueur sur l'écran
de du même coté de l'ecran pour ne pas avoir une fenètre 2 fois plus grande,
la racket du deusième joueur doit aparaitre en opacité inférieur pour que
le premier compraine instinctivement que ce n'est pas ca racket, et inversement
de sur l'ecran du deusième.
De plus il faut que lors que la ball rebondi sur le mure d'en fase sont opacité
change pour signifié au joueur que ces a lui ou a sont adversaire de toucher la
ball.
Le fait de voir les deux racket permet aussi de repéré une triche éventuel.

Nous avion aussi prévus un panel de thèmes different pour la racket, la ball et
le fond d'écran:
\begin{itemize}
\item Star Wars
\item Doom
\item Kung fury
\item etc.
\end{itemize}
Avec en plus de la possibilité pour le joueur de fair des thèmes personalisé
avec ces propore images et music.

\part{Recherche de solutions}
\chapter{Définition d'un protocole}
Il a donc falut définir un protocol de communication qui permet de comuniqué
pour l'échange d'information.
Pour cela nous somme parti de l'idée de commande acompagné d'argument sous la
forme : \texttt{COMMANDE:arg1,arg2,arg3;}.

La commande est séparé des argument par deux point ':' et chaque argument et
séparé par une virgule ',' et la commande de termine par un point virgule ';'.

Pour simplifié la programation de la réception de commande il a étais convenu
que la commande de dépaserai pas 4 caractères (MOVE / CONN). Ainsi il est
possible de récupéré séparément la commande et les argument comme ceci:
\begin{minted}{python}
def parse_cmd(self, cmd):
   act = cmd[:4]
   if cmd[-1:] == ';':
      arg = cmd[5:-1]
   else:
      arg = cmd[5:]
   sarg = arg.split(",")
   return act, sarg
\end{minted}

Pour récupéré l'action demandé il suffit de note que l'on veut les 4 premiere
caracère de la chaine, cette méthode et sans doute moins couteuse qu'un split
au niveau des deux points (':').

A noté qu'ici on peut voire une condition sur le dernier caractère de la chaine
cmd, elle permet de corrigé un bug que nous avon rencontré car la récupération
des commande par le réseaux peut se faire de deux façon diférente selon.
Le fait qu'il y ai deux facon de répuréré les commandes vien elle même d'un
problème rencontré lors de la lecture des données du réseaux. En effet
plusieurs commandes peuvent être lus en même temps sur le réseaux il faut
donc découpé la chaine les données brute reçu au niveaux du point virgule
(';').
Le probleme et que la séquance de connection et d'échange de paramètre doit
respecté un ordre prési et donc nous utilisont une autre fonction qui est
faite récupéré un seul commande à la fois et la valeur retourné par cette
fonction se termine par ';'.

\chapter{Choix concernant l'affichage graphique} % Titre moyen
Pour des raisons de modularité, nous avons décidés d'employer le
paradigme objet, celui-ci se trouve en effet particulièrement bien
adaptés aux jeux vidéos. Le but était de faciliter les ajouts
d'éléments futurs...

\part{Mise en place des solutions}
\chapter{Mise en place du protocole}

\chapter{Mise en place de l'interface graphique}

\chapter{Mise en commun}
% Là on peut mettre qu'on en a chié parce qu'on a pas assez schématisé,
% je pense que si on montre qu'on a repéré nos erreurs ça peut être
% un bon point. (Oui/Non ?)

\end{document}
